{"code":"import Snackbar from '../snackbar/index';\r\nvar Downloader = /** @class */ (function () {\r\n    function Downloader(wrapper) {\r\n        var submit = wrapper.querySelector('.files-page__submit-btn');\r\n        var items = [];\r\n        var downloadItems = wrapper.querySelectorAll('.files-page__item');\r\n        downloadItems.forEach(function (item, index) {\r\n            var url = item.getAttribute('data-download-url') || '';\r\n            var checkbox = item.querySelector('input[type=\"checkbox\"]');\r\n            items.push({\r\n                wrapper: item,\r\n                checkbox: checkbox,\r\n                url: url,\r\n                id: index,\r\n                checked: false,\r\n            });\r\n        });\r\n        this.wrapper = wrapper;\r\n        this.submit = submit;\r\n        this.items = items;\r\n        this.init();\r\n    }\r\n    Downloader.prototype.init = function () {\r\n        var _this = this;\r\n        this.submit.addEventListener('click', this.downloadFiles.bind(this));\r\n        this.items.forEach(function (item) {\r\n            item.checkbox.addEventListener('change', _this.handleChangeCheckbox.bind(_this, item));\r\n        });\r\n    };\r\n    Downloader.prototype.handleChangeCheckbox = function (item, event) {\r\n        if (event.target.checked) {\r\n            item.wrapper.classList.add('files-page__item_success');\r\n            item.checked = true;\r\n        }\r\n        else {\r\n            item.wrapper.classList.remove('files-page__item_success');\r\n            item.checked = false;\r\n        }\r\n    };\r\n    Downloader.prototype.downloadFiles = function () {\r\n        var activeElements = this.items.filter(function (item) { return item.checked; });\r\n        if (!activeElements.length) {\r\n            new Snackbar('Выберите файлы для загрузки', 'danger', 3000);\r\n            return;\r\n        }\r\n        activeElements.forEach(function (item) {\r\n            var link = document.createElement('a');\r\n            link.setAttribute('href', item.url);\r\n            link.setAttribute('download', 'download');\r\n            link.click();\r\n        });\r\n    };\r\n    return Downloader;\r\n}());\r\nexport default Downloader;\r\n","references":["/Users/roman/work/iwex-crm/iwex_crm/static/src/components/shared/snackbar/index.ts"]}
