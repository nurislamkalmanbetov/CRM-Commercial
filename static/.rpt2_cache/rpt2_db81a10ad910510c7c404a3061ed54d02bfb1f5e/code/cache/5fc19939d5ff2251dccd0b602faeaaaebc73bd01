{"code":"var Downloader = /** @class */ (function () {\r\n    function Downloader(wrapper) {\r\n        var submitButtons = wrapper.querySelectorAll('.files-page__submit-btn');\r\n        this.wrapper = wrapper;\r\n        this.submitButtons = submitButtons;\r\n        this.init();\r\n    }\r\n    Downloader.prototype.init = function () {\r\n        var _this = this;\r\n        this.submitButtons.forEach(function (btn) {\r\n            btn.addEventListener('click', _this.handleSubmit.bind(_this));\r\n        });\r\n    };\r\n    Downloader.prototype.handleSubmit = function (e) {\r\n        if (e.target.getAttribute('data-type') === 'print') {\r\n            this.printFile();\r\n        }\r\n        else {\r\n            this.downloadFile();\r\n        }\r\n    };\r\n    Downloader.prototype.printFile = function () {\r\n        var downloadItem = document.querySelector('#iframe');\r\n        var url = downloadItem.src;\r\n        var iframe = this.frame;\r\n        if (!this.frame) {\r\n            iframe = this.frame = document.createElement('iframe');\r\n            document.body.appendChild(iframe);\r\n            iframe.style.display = 'none';\r\n            iframe.onload = function () {\r\n                setTimeout(function () {\r\n                    iframe.focus();\r\n                    iframe.contentWindow.print();\r\n                }, 100);\r\n            };\r\n        }\r\n        iframe.src = url;\r\n    };\r\n    Downloader.prototype.downloadFile = function () {\r\n        var downloadItem = document.querySelector('#iframe');\r\n        var url = downloadItem.src;\r\n        var link = document.createElement('a');\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', 'download');\r\n        link.click();\r\n    };\r\n    return Downloader;\r\n}());\r\nexport default Downloader;\r\n","references":["/Users/roman/work/iwex-crm/iwex_crm/static/src/components/shared/snackbar/index.ts"]}
