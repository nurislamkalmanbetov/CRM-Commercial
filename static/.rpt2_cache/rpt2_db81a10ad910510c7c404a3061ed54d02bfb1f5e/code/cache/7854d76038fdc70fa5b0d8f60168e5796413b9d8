{"code":"var DATA = {\r\n    personal: ['firstname', 'lastname', 'birthday', 'sex', 'country'],\r\n};\r\nvar FormStatus = /** @class */ (function () {\r\n    function FormStatus(form) {\r\n        this.listItems = [];\r\n        this.form = form;\r\n        this.init();\r\n        this.createMenuIdList();\r\n    }\r\n    FormStatus.prototype.init = function () {\r\n        this.form.form.addEventListener('change', this.checkChange.bind(this));\r\n    };\r\n    FormStatus.prototype.checkChange = function (e) {\r\n        var _this = this;\r\n        this.listItems.forEach(function (_a) {\r\n            var item = _a.item;\r\n            var isSuccess = item.elements.every(function (key) {\r\n                return (_this.form.valids[key] && !_this.form.errors[key]) || !_this.form.validations[key].required;\r\n            });\r\n            if (isSuccess)\r\n                item.setStatus('success');\r\n            var isError = item.elements.every(function (key) {\r\n                return !_this.form.valids[key] && _this.form.errors[key];\r\n            });\r\n            if (isError || !isSuccess)\r\n                item.setStatus('error');\r\n        });\r\n    };\r\n    FormStatus.prototype.createMenuIdList = function () {\r\n        var _this = this;\r\n        Object.keys(DATA).forEach(function (key) {\r\n            var item = new ListItem(key, DATA[key]);\r\n            _this.listItems.push({\r\n                id: key,\r\n                item: item,\r\n            });\r\n        });\r\n    };\r\n    return FormStatus;\r\n}());\r\nexport default FormStatus;\r\nvar ListItem = /** @class */ (function () {\r\n    /*\r\n      We have a 3 statuses:\r\n      -success - when field is successed\r\n      -default - when field isn't touched\r\n      -error - when field isn't successed\r\n    */\r\n    function ListItem(id, elements) {\r\n        var wrapper = document.getElementById(\"menu-\" + id);\r\n        this.wrapper = wrapper;\r\n        this.id = id;\r\n        this.elements = elements;\r\n    }\r\n    ListItem.prototype.setStatus = function (status) {\r\n        this.status = status;\r\n        this.wrapper.className = \"basic-questionnaire-page__menu-item basic-questionnaire-page__menu-item_\" + status;\r\n    };\r\n    ListItem.prototype.getStatus = function () {\r\n        return this.status;\r\n    };\r\n    return ListItem;\r\n}());\r\n","references":["/Users/roman/work/iwex-crm/iwex_crm/static/src/components/forms/form/Form.ts"]}
